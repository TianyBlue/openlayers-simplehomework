import{T as f,X as v,V as k,s as m,M as x,a as C,c as P,F as V,O as E,b as y,G as p,d as M,S as G,C as N,e as O,$ as i}from"./vendor.e546cdd5.js";const T=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function e(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=e(a);fetch(a.href,n)}};T();new f({title:"\u5929\u5730\u56FE\u77E2\u91CF",source:new v({url:"http://t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f",wrapX:!1})});var X=new k({center:[115,35],zoom:6,projection:"EPSG:4326"});new m({units:"metric",bar:!0,text:!0,className:"ol-scale-line"});var l=new x({target:"map",layers:[],view:X}),z=new m({units:"metric",target:"scalebar",className:"ol-scale-line"}),j=new C({className:"mosuePosition",coordinateFormat:P(6),projection:"EPSG:4326",target:document.getElementById("position")}),A=new V,q=function(){l.addControl(z)},D=function(){l.addControl(A)},_=function(){l.addControl(j)},u=[],g=[],h=[],B=".layers";function I(t,r){t.addEventListener("click",function(){this.checked?r.setVisible(!0):r.setVisible(!1)})}var R=function(){for(var t=l.getLayers(),r=document.querySelector(B),e=0;e<t.getArray().length;e++){u[e]=t.item(e),g[e]=u[e].get("name"),h[e]=u[e].getVisible();var o=document.createElement("li");o.innerHTML='<input type="checkbox" name="layers"><label>'+g[e]+"</label>",r.appendChild(o),h[e]&&(o.firstElementChild.checked=!0),I(o.firstElementChild,u[e])}},Y=new v({url:"http://t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f",wrapX:!1}),H=new v({url:"http://t0.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f",attributions:"\u5929\u5730\u56FE\u5C5E\u6027\u63CF\u8FF0",wrapX:!1}),J=new E,K=new y({url:"http://localhost:31142/geoserver/dbtest/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=dbtest%3Achncityxy&maxFeatures=1500&outputFormat=application%2Fjson",format:new p,projection:"EPSG:4326"}),U=new y({url:"http://localhost:31142/project/GetChinaProvinces",format:new p,projection:"EPSG:4326"}),d={tiandiVec:Y,tiandiMark:H,OSM:J,city:K,province:U},W=function(t){for(var r in d)if(r==t){var e=new f({title:t,name:t,source:d[t]});l.addLayer(e);break}},w=function(t){for(var r in d)if(r==t){var e=new M({title:t,name:t,source:d[t]});l.addLayer(e),e.getSource();break}},b=function(t,r){var e=t.getSource();console.log(e),console.log(e.getUrl());var o=e.getFeatures();console.log(o);for(var a=String(r).split(),n=".*",s=0;s<a.length;s++)n=n+(a[s]+".*");for(var L=new RegExp(n),c=0;c<o.length;c++){var F=String(o[c].get("name")).trim();if(F.match(L))return o[c]}return null},S=function(t){for(var r=l.getLayers(),e=0;e<r.getArray().length;e++){var o=r.item(e);if(o.get("name")==t)return o}return null},Z=l.getView(),$=function(t){Z.animate({center:t.getGeometry().getCoordinates(),duration:2e3,zoom:10})},Q=new G({image:new N({radius:10,fill:new O({color:"#dc143c"})})}),ee=function(t){t.setStyle(Q)};W("OSM");w("city");w("province");q();D();_();R();i(".pic-nav").on("mouseenter",function(t){i(this).hide(),i(".nav").show().stop().animate({left:0})});i(".nav").on("mouseleave",function(t){i(this).stop().animate({left:-.8*i(this).width()},function(){i(".nav").hide(),i(".pic-nav").show()})});i(".searchBar button").on("click",function(){var t=i(this).siblings("input").val();console.log(t);var r=S("city"),e=b(r,t);e!=null?i(".searchState").text("\u5DF2\u641C\u7D22\u5230"+t+", \u4F4D\u7F6E\u5728:"+e.getGeometry().getCoordinates()):i(".searchState").text("\u672A\u641C\u7D22\u5230"+t+", \u8BF7\u5C1D\u8BD5\u5176\u4ED6\u4F4D\u7F6E\u3002"),ee(e),$(e)});var te=S("province"),re=b(te,"\u5C71\u4E1C");console.log(re);
//# sourceMappingURL=index.22723d57.js.map
