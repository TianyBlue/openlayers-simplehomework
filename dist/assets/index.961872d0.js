import{T as f,X as d,V as x,s as m,M as C,a as P,c as V,F as E,O as M,b as y,G as p,d as T,S as w,C as G,e as N,f as O,$ as i}from"./vendor.07cba0ae.js";const X=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}};X();new f({title:"\u5929\u5730\u56FE\u77E2\u91CF",source:new d({url:"http://t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f",wrapX:!1})});var z=new x({center:[115,35],zoom:6,projection:"EPSG:4326"});new m({units:"metric",bar:!0,text:!0,className:"ol-scale-line"});var s=new C({target:"map",layers:[],view:z}),A=new m({units:"metric",target:"scalebar",className:"ol-scale-line"}),R=new P({className:"mosuePosition",coordinateFormat:V(6),projection:"EPSG:4326",target:document.getElementById("position")}),j=new E,q=function(){s.addControl(A)},D=function(){s.addControl(j)},_=function(){s.addControl(R)},u=[],g=[],h=[],B=".layers";function I(e,r){e.addEventListener("click",function(){this.checked?r.setVisible(!0):r.setVisible(!1)})}var W=function(){for(var e=s.getLayers(),r=document.querySelector(B),t=0;t<e.getArray().length;t++){u[t]=e.item(t),g[t]=u[t].get("name"),h[t]=u[t].getVisible();var o=document.createElement("li");o.innerHTML='<input type="checkbox" name="layers"><label>'+g[t]+"</label>",r.appendChild(o),h[t]&&(o.firstElementChild.checked=!0),I(o.firstElementChild,u[t])}},Y=new d({url:"http://t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f",wrapX:!1}),H=new d({url:"http://t0.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f",attributions:"\u5929\u5730\u56FE\u5C5E\u6027\u63CF\u8FF0",wrapX:!1}),J=new M,K=new y({url:"http://localhost:31142/geoserver/dbtest/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=dbtest%3Achncityxy&maxFeatures=1500&outputFormat=application%2Fjson",format:new p,projection:"EPSG:4326"}),Z=new y({url:"http://localhost:31142/geoserver/dbtest/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=dbtest%3Achinaprovince&maxFeatures=15000&outputFormat=application%2Fjson",format:new p,projection:"EPSG:4326"}),v={tiandiVec:Y,tiandiMark:H,OSM:J,city:K,province:Z},$=function(e){for(var r in v)if(r==e){var t=new f({title:e,name:e,source:v[e]});s.addLayer(t);break}},b=function(e){for(var r in v)if(r==e){var t=new T({title:e,name:e,source:v[e]});s.addLayer(t);break}},S=function(e,r){for(var t=e.getSource(),o=t.getFeatures(),a=String(r).split(),n=".*",c=0;c<a.length;c++)n=n+(a[c]+".*");for(var L=new RegExp(n),l=0;l<o.length;l++){var k=String(o[l].get("name")).trim();if(k.match(L))return o[l]}return null},F=function(e){for(var r=s.getLayers(),t=0;t<r.getArray().length;t++){var o=r.item(t);if(o.get("name")==e)return o}return null},Q=s.getView(),U=function(e){Q.animate({center:e.getGeometry().getCoordinates(),duration:2e3,zoom:10})},ee=new w({image:new G({radius:10,fill:new N({color:"#dc143c"})})}),te=new w({stroke:new O({color:"#cccccc",width:1.25})}),re=function(e){e.setStyle(ee)},ae=new function(e){e.setStyle(te)};$("OSM");b("city");b("province");q();D();_();W();i(".pic-nav").on("mouseenter",function(e){i(this).hide(),i(".nav").show().stop().animate({left:0})});i(".nav").on("mouseleave",function(e){i(this).stop().animate({left:-.8*i(this).width()},function(){i(".nav").hide(),i(".pic-nav").show()})});i(".searchBar button").on("click",function(){var e=i(this).siblings("input").val();console.log(e);var r=F("city"),t=S(r,e);t!=null?(i(".searchState").text("\u5DF2\u641C\u7D22\u5230"+e+", \u4F4D\u7F6E\u5728:"+t.getGeometry().getCoordinates()),re(t),U(t)):i(".searchState").text("\u672A\u641C\u7D22\u5230"+e+", \u8BF7\u5C1D\u8BD5\u5176\u4ED6\u4F4D\u7F6E\u3002")});window.setTimeout(function(){var e=F("province"),r=S(e,"\u5C71\u4E1C");ae(r)},3e3);
//# sourceMappingURL=index.961872d0.js.map
