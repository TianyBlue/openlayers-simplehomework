{"version":3,"file":"index.00994a9f.js","sources":["../../vite/modulepreload-polyfill","../../src/init/initMap.js","../../src/controlGadget/controlGadgets.js","../../src/layerControl/layerControl.js","../../src/mapSource/mapSource.js","../../src/mapSource/test.js","../../src/searchFeature/searchFeature.js","../../src/mapInteraction/flyToPoint.js","../../src/mapInteraction/fillRedToFeature.js","../../src/createFeature/createPoint.js","../../src/getCityInfo/getInfo.js","../../src/mapInteraction/cityClick.js","../../src/mapInteraction/styleList.js","../../main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import ScaleLine from 'ol/control/ScaleLine';\r\nimport { Map } from \"ol\";\r\nimport TileLayer from \"ol/layer/Tile\";\r\nimport XYZ from 'ol/source/XYZ';\r\nimport View from 'ol/View';\r\n\r\n// var cityurl = 'http://localhost:31142/geoserver/dbtest/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=dbtest%3Achncityxy&maxFeatures=1500&outputFormat=application%2Fjson';\r\n\r\nvar tdVec = new TileLayer({\r\n    title: \"天地图矢量\",\r\n    source: new XYZ({\r\n        url: 'http://t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f',\r\n        wrapX: false\r\n    })\r\n});\r\n\r\nexport var layers = [tdVec]\r\n\r\nvar normalView = new View({\r\n    center: [114.5, 30.5],\r\n    zoom: 8,\r\n    projection: 'EPSG:4326'\r\n});\r\n\r\nvar scaleBar = new ScaleLine({\r\n    units: 'metric',\r\n    // target: 'scalebar',\r\n    bar: true,\r\n    text: true,\r\n    className: 'ol-scale-line'\r\n});\r\n\r\nexport var map = new Map({\r\n    target: 'map',\r\n    layers: [\r\n        \r\n    ],\r\n    view: normalView\r\n})","import scaleLine from \"ol/control/ScaleLine\"\r\nimport { map } from \"../init/initMap\";\r\nimport FullScreen from 'ol/control/FullScreen';\r\nimport MousePosition from \"ol/control/MousePosition\";\r\nimport { createStringXY } from \"ol/coordinate\";\r\n\r\n\r\nvar scalecontrol = new scaleLine({\r\n    units: 'metric',\r\n    target: 'scalebar',\r\n    className: 'ol-scale-line'\r\n});\r\n\r\nvar mousePositionControl = new MousePosition({\r\n    className: 'mosuePosition',\r\n    coordinateFormat: createStringXY(5),\r\n    projection: 'EPSG:4326',\r\n    target: document.getElementById('position')\r\n});\r\n\r\nvar fullscreen = new FullScreen();\r\n\r\nexport var addScaleLine = function(){\r\n    map.addControl(scalecontrol);\r\n}\r\n\r\nexport var addFullScreen = function(){\r\n    map.addControl(fullscreen);\r\n}\r\n\r\nexport var addMousePosControl = function(){\r\n    map.addControl(mousePositionControl);\r\n}","import { map } from \"../init/initMap\";\r\n\r\nvar layer = [];\r\nvar layerName = [];\r\nvar layerVisibility = [];\r\n\r\nvar selector = '.layers';\r\n\r\nfunction clickFunction(ele, layer) {\r\n    ele.addEventListener('click', function () {\r\n        if (this.checked) {\r\n            layer.setVisible(true);\r\n        }\r\n        else {\r\n            layer.setVisible(false);\r\n        }\r\n    });\r\n}\r\n\r\nexport var initiateLayerControl = function() {\r\n    var layers = map.getLayers();\r\n    // console.log(layers);\r\n    var container = document.querySelector(selector);\r\n    for (var i = 0; i < layers.getArray().length; i++) {\r\n        layer[i] = layers.item(i);\r\n        // console.log(layer[i]);\r\n        layerName[i] = layer[i].get('name');\r\n        layerVisibility[i] = layer[i].getVisible();\r\n        var ele = document.createElement('li');\r\n        ele.innerHTML = '<input type=\"checkbox\" name=\"layers\"><label>' + layerName[i] + '</label>';\r\n        container.appendChild(ele);\r\n        if (layerVisibility[i]) {\r\n            // console.log(\"true\");\r\n            ele.firstElementChild.checked = true;\r\n        }\r\n        clickFunction(ele.firstElementChild, layer[i]);\r\n    }\r\n\r\n}","import XYZ from \"ol/source/XYZ\"\r\nimport OSM from 'ol/source/OSM';\r\nimport { Tile } from \"ol\";\r\nimport VectorSource from \"ol/source/Vector\";\r\nimport GeoJSON from \"ol/format/GeoJSON\"\r\n\r\nvar tiandi = new XYZ({\r\n    url: \"http://t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f\",\r\n    wrapX: false\r\n});\r\n\r\nvar tiandiMark = new XYZ({\r\n    url: \"http://t0.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f\",\r\n    attributions: \"天地图属性描述\",\r\n    wrapX: false\r\n});\r\nvar osm = new OSM();\r\n\r\nvar city = new VectorSource({\r\n    url: 'http://localhost:31142/geoserver/dbtest/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=dbtest%3Achncityxy&maxFeatures=1500&outputFormat=application%2Fjson',\r\n    format: new GeoJSON(),\r\n    projection: 'EPSG:4326'\r\n});\r\n\r\nvar chinaProvinces = new VectorSource({\r\n    url: 'http://localhost:31142/geoserver/dbtest/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=dbtest%3Achinaprovince&maxFeatures=15000&outputFormat=application%2Fjson',\r\n    format: new GeoJSON(),\r\n    projection: 'EPSG:4326'\r\n})\r\n\r\nvar footTrack = new VectorSource({\r\n    url: 'http://localhost:31142/geoserver/dbtest/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=dbtest%3Afoottrack&maxFeatures=1500&outputFormat=application%2Fjson',\r\n    format: new GeoJSON(),\r\n    projection: 'EPSG:4326'\r\n});\r\n\r\nexport var mapSource = {\r\n    'tiandiVec': tiandi,\r\n    'tiandiMark':tiandiMark,\r\n    'OSM': osm,\r\n    'city': city,\r\n    'province' : chinaProvinces,\r\n    'footTrack': footTrack\r\n}","import { Tile } from \"ol\"\r\nimport TileLayer from \"ol/layer/Tile\"\r\nimport VectorLayer from \"ol/layer/Vector\"\r\nimport { map } from \"../init/initMap\"\r\nimport { mapSource } from \"./mapSource\"\r\n\r\nexport var addTileLayer = function(name){\r\n    for(var src in mapSource){\r\n        if(src == name){\r\n            var layer = new TileLayer({\r\n                title: name,\r\n                name:name,\r\n                source: mapSource[name],\r\n            });\r\n            map.addLayer(layer);\r\n            break;\r\n        }\r\n    }\r\n}\r\n\r\nexport var addVectorLayer = function(name){\r\n    for(var src in mapSource){\r\n        if(src == name){\r\n            var layer = new VectorLayer({\r\n                title: name,\r\n                name:name,\r\n                source: mapSource[name],\r\n            });\r\n            map.addLayer(layer);\r\n            return layer;\r\n        }\r\n    }\r\n}","import { Feature } from \"ol\";\r\nimport VectorLayer from \"ol/layer/Vector\";\r\nimport { map } from \"../init/initMap\"\r\n\r\nexport var getFeature = function (layer, attr) {\r\n    var source = layer.getSource();\r\n    var features = source.getFeatures();\r\n    var words = String(attr).split();\r\n    var pattern = \".*\";\r\n    for (var i = 0; i < words.length; i++)\r\n        pattern = pattern + (words[i] + \".*\");\r\n    var keyword = new RegExp(pattern);\r\n    for (var j = 0; j < features.length; j++) {\r\n        var name = String(features[j].get('cityname')).trim();\r\n        if (name.match(keyword))\r\n        {\r\n            return features[j];\r\n        }    \r\n    }\r\n    return null;\r\n}\r\n\r\nexport var getLayer = function (layername) {\r\n    var layers = map.getLayers();\r\n    for (var i = 0; i < layers.getArray().length; i++) {\r\n        var layer = layers.item(i);\r\n        if (layer.get('name')==layername) {\r\n            return layer;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n\r\n// var fea = new Feature();\r\n\r\n// fea.on('click', function () {\r\n//     console.log(this);\r\n// })\r\n\r\n\r\n// var layer = new VectorLayer();\r\n\r\n// layer.on({\r\n\r\n// })\r\n\r\n// export var featureClick = function (layer) {\r\n//     var features = layer.getSource().getFeature\r\n// }","import { fromLonLat } from \"ol/proj\";\r\nimport { map } from \"../init/initMap\";\r\n\r\nvar view = map.getView();\r\n\r\nexport var flyToFeature=function(feature){\r\n\r\n    // var ext = feature.getGeometry().getExtent();\r\n\r\n    view.animate({\r\n        center: feature.getGeometry().getCoordinates(),\r\n        duration: 2000,\r\n        zoom: 10\r\n        // easing:function (t) {\r\n        //     var s = 7.5625, p = 2.75, l;\r\n        //     if (t < (1 / p)) {\r\n        //         l = s * t * t;\r\n        //     } else {\r\n        //         if (t < (2 / p)) {\r\n        //             t -= (1.5 / p);\r\n        //             l = s * t * t + 0.75;\r\n        //         } else {\r\n        //             if (t < (2.5 / p)) {\r\n        //                 t -= (2.25 / p);\r\n        //                 l = s * t * t + 0.9375;\r\n        //             } else {\r\n        //                 t -= (2.625 / p);\r\n        //                 l = s * t * t + 0.984375;\r\n        //             }\r\n        //         }\r\n        //     }\r\n        //     return l;\r\n        // }\r\n    });\r\n\r\n    // window.setTimeout(function(){\r\n    //     view.setZoom(10);\r\n    // },2000);\r\n\r\n}","import Style from \"ol/style/Style\";\r\nimport Circle from \"ol/style/Circle\"\r\nimport Fill from \"ol/style/Fill\";\r\nimport Stroke from \"ol/style/Stroke\";\r\n\r\nlet pointRedStyle = new Style({\r\n    image: new Circle({\r\n        radius: 6,\r\n        fill: new Fill({\r\n            color:'#dc143c'\r\n        })\r\n    })\r\n});\r\n\r\nlet polygonRedStyle = new Style({\r\n    stroke: new Stroke({\r\n        color: '#dc143c',\r\n        width: 1.25\r\n    }),\r\n    fill: new Fill({\r\n        color: 'rgba(0.5,0.5,0.5,0.1)'\r\n    }),\r\n    zIndex: 999\r\n});\r\n\r\nexport var fillRedToPoint=function(feature){\r\n    feature.setStyle(pointRedStyle);\r\n}\r\n\r\nexport var fillRedToPolygon=function(feature){\r\n    feature.setStyle(polygonRedStyle);\r\n}","import VectorLayer from \"ol/layer/Vector\";\r\nimport VectorSource from \"ol/source/Vector\";\r\nimport Style from \"ol/style/Style\";\r\nimport { map } from \"../init/initMap\";\r\nimport Draw from \"ol/interaction/Draw\";\r\nimport Fill from \"ol/style/Fill\";\r\nimport Stroke from \"ol/style/Stroke\";\r\nimport { Point } from \"ol/geom\";\r\nimport Circle from \"ol/style/Circle\";\r\nimport $ from \"jquery\"\r\n\r\n\r\nvar drawPoint;\r\n\r\nvar createdSource = new VectorSource({\r\n    wrapX: false\r\n});\r\n\r\nvar createdLayer = new VectorLayer({\r\n    source: createdSource,\r\n    style: new Style({\r\n        fill: new Fill({\r\n            color: 'rgba(255,255,255,0.2)'\r\n        }),\r\n        stroke: new Stroke({\r\n            color: '#ff0000',\r\n            width: 2\r\n        }),\r\n        image: new Circle({\r\n            radius: 7,\r\n            fill: new Fill({\r\n                color: '#ff0000'\r\n            })\r\n        })\r\n    }),\r\n    zIndex: 999,\r\n    name: '新建要素图层'\r\n});\r\n\r\nvar geomFunc = function (coordinate, geometry) {\r\n    if (!geometry) {\r\n        geometry = new Point(coordinate);\r\n    }\r\n    geometry.setCoordinates(coordinate);\r\n    return geometry;\r\n};\r\n\r\nmap.addLayer(createdLayer);\r\n\r\nexport var createPoint = function () {\r\n    drawPoint = new Draw({\r\n        type: 'Point',\r\n        source: createdSource,\r\n        geometryFunction: geomFunc\r\n    });\r\n    \r\n    map.addInteraction(drawPoint);\r\n}\r\n\r\nexport var quitCreatePoint = function(){\r\n    var features = createdSource.getFeatures();\r\n    if(confirm(\"是否保存已绘制要素？\")){\r\n        var pointsArray = [];\r\n        for(var i=0;i<features.length;i++)\r\n        {\r\n            var feature = features[i];\r\n            // var pts = [feature.getGeometry().getCoordinates()[0],feature.getGeometry().getCoordinates()[0],450];\r\n            pointsArray.push(feature.getGeometry().getCoordinates());\r\n        }\r\n        var pointsObj = {\r\n            pointsCount: pointsArray.length,\r\n            points: pointsArray\r\n        };\r\n        var reqBody = JSON.stringify(pointsObj);\r\n        // console.log(JSON.stringify(pointsArray));\r\n        sendJson(reqBody);\r\n    }\r\n    else{\r\n        createdSource = new VectorSource({\r\n            wrapX: false\r\n        });\r\n        createdLayer.setSource(createdSource);\r\n    }\r\n    map.removeInteraction(drawPoint);\r\n}\r\n\r\nfunction sendJson(body){\r\n    console.log(body);\r\n    $.ajax({\r\n        url: '/project/AddPointsToDB',\r\n        type: \"POST\",\r\n        contentType: 'application/json;charset=utf-8',\r\n        data: body,\r\n        success: function(){alert(\"已保存\")},\r\n        error: function(){alert(\"保存失败\");}\r\n    });\r\n}","import $ from \"jquery\";\r\n\r\nfunction getCorrectVal(param) {\r\n    if (param == 0)\r\n        return \"暂无数据\"\r\n    else {\r\n        return param;\r\n    }\r\n}\r\n\r\nlet nullStatInfo = {\r\n    name: \"暂无数据\",\r\n    gdp: \"暂无数据\",\r\n    pop: \"暂无数据\",\r\n    ave_gdp: \"暂无数据\",\r\n    increase_ratio: \"暂无数据\",\r\n    construction_land: \"暂无数据\",\r\n    inhabitant_land: \"暂无数据\",\r\n    con_land_per: \"暂无数据\"\r\n};\r\n\r\n// 更新右侧info\r\nexport var updateInfo = function (name) {\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.open('GET', '/project/GetStatInfo?name=' + name);\r\n    let json = null;\r\n    xhr.onreadystatechange = function () {\r\n        if (xhr.readyState == 4 && xhr.status == 200) {\r\n            json = JSON.parse(xhr.responseText);\r\n            // console.log(json);\r\n            if (json == null) {\r\n                json = nullStatInfo;\r\n            }\r\n            $('.info-content .name span').text(json[\"name\"]);\r\n            $('.info-content .gdp span').text(getCorrectVal(json[\"gdp\"]));\r\n            $('.info-content .pop span').text(getCorrectVal(json[\"pop\"]));\r\n            $('.info-content .ave_gdp span').text(getCorrectVal(json[\"ave_gdp\"]));\r\n\r\n            $('.info-content .increase_ratio span').text(getCorrectVal(json[\"increase_ratio\"]));\r\n            $('.info-content .construction_land span').text(getCorrectVal(json[\"construction_land\"]));\r\n            $('.info-content .inhabitant_land span').text(getCorrectVal(json[\"inhabitant_land\"]));\r\n            $('.info-content .con_land_per span').text(getCorrectVal(json[\"con_land_per\"]));\r\n        }\r\n    }\r\n    xhr.send();\r\n\r\n    let nearCityxhr = new XMLHttpRequest();\r\n    nearCityxhr.open('GET', '/project/GetNearestCity?name=' + name);\r\n    let info = null;\r\n    nearCityxhr.onreadystatechange = function () {\r\n        if (nearCityxhr.readyState == 4 && nearCityxhr.status == 200) {\r\n            info = JSON.parse(nearCityxhr.responseText);\r\n            if (info == null) {\r\n                console.log(\"NetWork Error\");\r\n                return;\r\n            }\r\n            else {\r\n                $('.info-content .nearest_city span').text(info[\"name\"]);\r\n                $('.info-content .distance span').text(info[\"distance\"].toFixed(2));\r\n            }\r\n        }\r\n    }\r\n    nearCityxhr.send();\r\n}","import { map } from \"../init/initMap\";\r\nimport Select from \"ol/interaction/Select\"\r\nimport { click } from 'ol/events/condition';\r\nimport { getLayer } from \"../searchFeature/searchFeature\";\r\nimport Text from \"ol/style/Text\";\r\nimport Fill from \"ol/style/Fill\";\r\nimport Circle from 'ol/style/Circle';\r\nimport Style from \"ol/style/Style\";\r\nimport { updateInfo } from \"../getCityInfo/getInfo\";\r\nimport $ from \"jquery\";\r\n\r\nlet selectInteract;\r\n\r\n// 鼠标移动到要素上时，样式变为小手\r\nmap.on('pointermove', function (evt) {\r\n    var pixel = map.getEventPixel(evt.originalEvent);\r\n    let isPoint = false;\r\n    map.forEachFeatureAtPixel(pixel,(feature,layer)=>{\r\n        if(layer&&layer.get('name')=='city')\r\n            isPoint = true;\r\n    });\r\n    if (map.hasFeatureAtPixel(pixel) && isPoint) {\r\n        $('body').css('cursor', 'pointer');\r\n    }\r\n    else {\r\n        $('body').css('cursor', 'default');\r\n    }\r\n});\r\n\r\nexport var addCityClick = () => {\r\n\r\n    let city = getLayer('city');\r\n    // 单击选择要素，要素颜色变为红色\r\n    selectInteract = new Select({\r\n        condition: click,\r\n        layers: [city],\r\n        style: function (feature) {\r\n            var style = new Style({\r\n                image: new Circle({\r\n                    radius: 8,\r\n                    fill: new Fill({\r\n                        color: '#dc143c'\r\n                    })\r\n                }),\r\n                text: new Text({\r\n                    font: '13px MicroSoft YaHei bolder',\r\n                    text: feature.get(\"name\"),\r\n                    fill: new Fill({\r\n                        color: '#dc143c'\r\n                    }),\r\n                    offsetX: 15,\r\n                    offsetY: 15\r\n                })\r\n            });\r\n            return style;\r\n        }\r\n    });\r\n\r\n    // 添加查询选中要素的事件\r\n    selectInteract.on('select', function (evt) {\r\n        // console.log(selectInteract);\r\n        let features = selectInteract.getFeatures().getArray();\r\n\r\n        if (features.length > 0) {\r\n            var feature = features[0];\r\n            updateInfo(feature.get(\"name\"));\r\n        }\r\n    });\r\n\r\n    map.addInteraction(selectInteract);\r\n}\r\n\r\nexport var removeCityClick = () => {\r\n    map.removeInteraction(selectInteract);\r\n}","import Style from \"ol/style/Style\";\r\nimport Circle from \"ol/style/Circle\"\r\nimport Fill from \"ol/style/Fill\";\r\nimport Stroke from \"ol/style/Stroke\";\r\n\r\nlet pointStyleGrey = new Style({\r\n    image: new Circle({\r\n        radius: 4,\r\n        stroke: new Stroke({\r\n            // color:'#8cc269',\r\n            color: '#e2d849',\r\n            width:1.00\r\n        }),\r\n        fill: new Fill({\r\n            color: '#8cc269'\r\n        })\r\n    })\r\n});\r\n\r\nconst fill = new Fill({\r\n    color: 'rgba(255,255,255,0.0)',\r\n});\r\n\r\nconst stroke = new Stroke({\r\n    color: '#3399CC',\r\n    width: 1.00,\r\n});\r\n\r\nlet fillStyle = new Style({\r\n    image: new Circle({\r\n        fill: fill,\r\n        stroke: stroke,\r\n        radius: 4,\r\n    }),\r\n    fill: fill,\r\n    stroke: stroke,\r\n});\r\n\r\nexport var styleList = {\r\n    'pointStyleGrey': pointStyleGrey,\r\n    'fillStyle':fillStyle\r\n}","import { addFullScreen, addMousePosControl, addScaleLine } from \"./src/controlGadget/controlGadgets\";\nimport { initiateLayerControl } from \"./src/layerControl/layerControl\";\nimport { addTileLayer, addVectorLayer } from \"./src/mapSource/test\"\nimport $ from \"jquery\"\nimport { getFeature, getLayer } from \"./src/searchFeature/searchFeature\";\nimport { flyToFeature } from \"./src/mapInteraction/flyToPoint\";\nimport { fillRedToPoint, fillRedToPolygon } from \"./src/mapInteraction/fillRedToFeature\";\nimport { createPoint, quitCreatePoint } from \"./src/createFeature/createPoint\";\nimport { addCityClick } from \"./src/mapInteraction/cityClick\";\nimport { styleList } from \"./src/mapInteraction/styleList\";\n\naddTileLayer('OSM');\naddVectorLayer('city');\nconst provinceLayer = addVectorLayer('province');\nconst footTrackLayer = addVectorLayer('footTrack');\n\nfootTrackLayer.setStyle(styleList['pointStyleGrey']);\nprovinceLayer.setStyle(styleList['fillStyle']);\n\n// async function readFields(){\n//     let data = await footTrackLayer.getFeatures();\n//     console.log(data);\n// }\n\n// readFields()\n// console.log(footTrackLayer.getKeys());\n\naddCityClick();\n\naddScaleLine();\naddFullScreen();\naddMousePosControl();\n\ninitiateLayerControl();\n\nlet defaultStyle;\nlet lastFeature;\n\n$('.pic-nav').on('mouseenter', function (e) {\n    $(this).hide();\n    $('.nav').show().stop().animate({\n        left: 0\n    });\n\n});\n\n$('.nav').on('mouseleave', function (e) {\n    $(this).stop().animate({\n        left: -0.6 * $(this).width()\n    }, function () {\n        $('.nav').hide();\n        $('.pic-nav').show();\n    });\n\n});\n\n$('.searchBar .search').on('click', function () {\n    let attr = $(this).siblings('input').val();\n    // console.log(attr);\n    let layer = getLayer('footTrack');\n    let feature = getFeature(layer, attr);\n\n    let oldText = $('.info-bar .info').html();\n\n    if (feature != null) {\n        $('.info-bar .info').html(oldText + \"已搜索到\" + attr + \", 位置在:<br />\"\n            + feature.getGeometry().getCoordinates() + \"<br /><br />\");\n\n        //清空原有红色\n        if (lastFeature != null)\n            lastFeature.setStyle(defaultStyle);\n\n        lastFeature = feature;\n        defaultStyle = feature.getStyle();\n        fillRedToPoint(feature);\n        flyToFeature(feature);\n    }\n    else {\n        $('.info-bar .info').html(oldText + \"未搜索到\" + attr + \", 请尝试其他位置。<br /><br />\");\n    }\n});\n\n$('.tools .density').on('click', function () {\n    let xhr = new XMLHttpRequest();\n    xhr.open('GET', '/project/GetDensePointProvince');\n    let info = null;\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState == 4 && xhr.status == 200) {\n            //info is a list\n            info = JSON.parse(xhr.response);\n            let prov = getLayer(\"province\");\n            if (info == null) {\n                console.log(\"NetWork Error!\");\n                return;\n            }\n            else {\n                console.log(info);\n                let text = \"\";\n                for (let i = 0; i < 3; i++) {\n                    let fea = getFeature(prov, info[i][\"name\"]);\n                    console.log(fea);\n                    fea && fillRedToPolygon(fea);\n                    text += (info[i][\"name\"] + \",\" + info[i][\"points\"]);\n                    text += \";\";\n                }\n                text = text.slice(0, text.length - 1);\n                // console.log(text);\n                let oldText = $('.info-bar .info').html();\n                $('.info-bar .info').html(oldText + \"密度最高的三个省份为: \" + text + \"<br /><br />\");\n            }\n        }\n    }\n    xhr.send();\n});\n\n\n$('.tools .create-point').on('click', function () {\n    createPoint();\n});\n\n$('.tools .quit-create').on('click', function () {\n    quitCreatePoint();\n});\n\n\n\n$('a.group-page').on('click',()=>{\n    $('.main-map').hide();\n    $('.courses-info').hide();\n    $('.group-info').show();\n    $('.contact-info').hide();\n    $('.tools-used-info').hide();\n});\n\n$('a.map-page').on('click',()=>{\n    $('.main-map').show();\n    $('.courses-info').hide();\n    $('.group-info').hide();\n    $('.contact-info').hide();\n    $('.tools-used-info').hide();\n});\n\n$('a.courses-page').on('click',()=>{\n    $('.main-map').hide();\n    $('.courses-info').show();\n    $('.group-info').hide();\n    $('.contact-info').hide();\n    $('.tools-used-info').hide();\n});\n\n$('a.contact-page').on('click',()=>{\n    $('.main-map').hide();\n    $('.courses-info').hide();\n    $('.group-info').hide();\n    $('.contact-info').show();\n    $('.tools-used-info').hide();\n    \n});\n\n$('a.tools-used-page').on('click',()=>{\n    $('.main-map').hide();\n    $('.courses-info').hide();\n    $('.group-info').hide();\n    $('.contact-info').hide();\n    $('.tools-used-info').show();\n});\n\n\n$('.tools .open-city-info').on('click',function(){\n    $('.city-info').toggle();\n});"],"names":["ScaleLine"],"mappings":"4LAAA,KAAM,GAAI,UAAoB,CAC1B,KAAM,GAAU,SAAS,cAAc,QAAQ,QAC/C,GAAI,GAAW,EAAQ,UAAY,EAAQ,SAAS,iBAChD,OAEJ,SAAW,KAAQ,UAAS,iBAAiB,6BACzC,EAAe,GAEnB,GAAI,kBAAiB,AAAC,GAAc,CAChC,SAAW,KAAY,GACnB,GAAI,EAAS,OAAS,YAGtB,SAAW,KAAQ,GAAS,WACxB,AAAI,EAAK,UAAY,QAAU,EAAK,MAAQ,iBACxC,EAAe,KAG5B,QAAQ,SAAU,CAAE,UAAW,GAAM,QAAS,KACjD,WAAsB,EAAQ,CAC1B,KAAM,GAAY,GAClB,MAAI,GAAO,WACP,GAAU,UAAY,EAAO,WAC7B,EAAO,gBACP,GAAU,eAAiB,EAAO,gBACtC,AAAI,EAAO,cAAgB,kBACvB,EAAU,YAAc,UACvB,AAAI,EAAO,cAAgB,YAC5B,EAAU,YAAc,OAExB,EAAU,YAAc,cACrB,EAEX,WAAwB,EAAM,CAC1B,GAAI,EAAK,GAEL,OACJ,EAAK,GAAK,GAEV,KAAM,GAAY,EAAa,GAC/B,MAAM,EAAK,KAAM,KAEvB,AAAoB,IClCV,GAAI,GAAU,CACtB,MAAO,iCACP,OAAQ,GAAI,GAAI,CACZ,IAAK,kGACL,MAAO,OAMf,GAAI,GAAa,GAAI,GAAK,CACtB,OAAQ,CAAC,MAAO,MAChB,KAAM,EACN,WAAY,cAGD,GAAIA,GAAU,CACzB,MAAO,SAEP,IAAK,GACL,KAAM,GACN,UAAW,kBAGR,GAAI,GAAM,GAAI,GAAI,CACrB,OAAQ,MACR,OAAQ,GAGR,KAAM,IC9BN,EAAe,GAAI,GAAU,CAC7B,MAAO,SACP,OAAQ,WACR,UAAW,kBAGX,EAAuB,GAAI,GAAc,CACzC,UAAW,gBACX,iBAAkB,EAAe,GACjC,WAAY,YACZ,OAAQ,SAAS,eAAe,cAGhC,GAAa,GAAI,GAEV,GAAe,UAAU,CAChC,EAAI,WAAW,IAGR,GAAgB,UAAU,CACjC,EAAI,WAAW,KAGR,GAAqB,UAAU,CACtC,EAAI,WAAW,IC7Bf,EAAQ,GACR,EAAY,GACZ,EAAkB,GAElB,GAAW,UAEf,YAAuB,EAAK,EAAO,CAC/B,EAAI,iBAAiB,QAAS,UAAY,CACtC,AAAI,KAAK,QACL,EAAM,WAAW,IAGjB,EAAM,WAAW,MAKtB,GAAI,IAAuB,UAAW,CAIzC,OAHI,GAAS,EAAI,YAEb,EAAY,SAAS,cAAc,IAC9B,EAAI,EAAG,EAAI,EAAO,WAAW,OAAQ,IAAK,CAC/C,EAAM,GAAK,EAAO,KAAK,GAEvB,EAAU,GAAK,EAAM,GAAG,IAAI,QAC5B,EAAgB,GAAK,EAAM,GAAG,aAC9B,GAAI,GAAM,SAAS,cAAc,MACjC,EAAI,UAAY,+CAAiD,EAAU,GAAK,WAChF,EAAU,YAAY,GAClB,EAAgB,IAEhB,GAAI,kBAAkB,QAAU,IAEpC,GAAc,EAAI,kBAAmB,EAAM,MC7B/C,GAAS,GAAI,GAAI,CACjB,IAAK,kGACL,MAAO,KAGP,GAAa,GAAI,GAAI,CACrB,IAAK,kGACL,aAAc,6CACd,MAAO,KAEP,GAAM,GAAI,GAEV,GAAO,GAAI,GAAa,CACxB,IAAK,wKACL,OAAQ,GAAI,GACZ,WAAY,cAGZ,GAAiB,GAAI,GAAa,CAClC,IAAK,6KACL,OAAQ,GAAI,GACZ,WAAY,cAGZ,GAAY,GAAI,GAAa,CAC7B,IAAK,wKACL,OAAQ,GAAI,GACZ,WAAY,cAGL,EAAY,CACnB,UAAa,GACb,WAAa,GACb,IAAO,GACP,KAAQ,GACR,SAAa,GACb,UAAa,ICpCN,GAAe,SAAS,EAAK,CACpC,OAAQ,KAAO,GACX,GAAG,GAAO,EAAK,CACX,GAAI,GAAQ,GAAI,GAAU,CACtB,MAAO,EACP,KAAK,EACL,OAAQ,EAAU,KAEtB,EAAI,SAAS,GACb,QAKD,EAAiB,SAAS,EAAK,CACtC,OAAQ,KAAO,GACX,GAAG,GAAO,EAAK,CACX,GAAI,GAAQ,GAAI,GAAY,CACxB,MAAO,EACP,KAAK,EACL,OAAQ,EAAU,KAEtB,SAAI,SAAS,GACN,ICzBR,EAAa,SAAU,EAAO,EAAM,CAK3C,OAJI,GAAS,EAAM,YACf,EAAW,EAAO,cAClB,EAAQ,OAAO,GAAM,QACrB,EAAU,KACL,EAAI,EAAG,EAAI,EAAM,OAAQ,IAC9B,EAAU,EAAW,GAAM,GAAK,MAEpC,OADI,GAAU,GAAI,QAAO,GAChB,EAAI,EAAG,EAAI,EAAS,OAAQ,IAAK,CACtC,GAAI,GAAO,OAAO,EAAS,GAAG,IAAI,aAAa,OAC/C,GAAI,EAAK,MAAM,GAEX,MAAO,GAAS,GAGxB,MAAO,OAGA,EAAW,SAAU,EAAW,CAEvC,OADI,GAAS,EAAI,YACR,EAAI,EAAG,EAAI,EAAO,WAAW,OAAQ,IAAK,CAC/C,GAAI,GAAQ,EAAO,KAAK,GACxB,GAAI,EAAM,IAAI,SAAS,EACnB,MAAO,GAGf,MAAO,OC3BP,GAAO,EAAI,UAEJ,GAAa,SAAS,EAAQ,CAIrC,GAAK,QAAQ,CACT,OAAQ,EAAQ,cAAc,iBAC9B,SAAU,IACV,KAAM,MCPd,GAAI,IAAgB,GAAI,GAAM,CAC1B,MAAO,GAAI,GAAO,CACd,OAAQ,EACR,KAAM,GAAI,GAAK,CACX,MAAM,gBAKd,GAAkB,GAAI,GAAM,CAC5B,OAAQ,GAAI,GAAO,CACf,MAAO,UACP,MAAO,OAEX,KAAM,GAAI,GAAK,CACX,MAAO,0BAEX,OAAQ,MAGL,GAAI,IAAe,SAAS,EAAQ,CACvC,EAAQ,SAAS,KAGV,GAAiB,SAAS,EAAQ,CACzC,EAAQ,SAAS,KClBjB,EAEA,EAAgB,GAAI,GAAa,CACjC,MAAO,KAGP,EAAe,GAAI,GAAY,CAC/B,OAAQ,EACR,MAAO,GAAI,GAAM,CACb,KAAM,GAAI,GAAK,CACX,MAAO,0BAEX,OAAQ,GAAI,GAAO,CACf,MAAO,UACP,MAAO,IAEX,MAAO,GAAI,GAAO,CACd,OAAQ,EACR,KAAM,GAAI,GAAK,CACX,MAAO,gBAInB,OAAQ,IACR,KAAM,yCAGN,GAAW,SAAU,EAAY,EAAU,CAC3C,MAAK,IACD,GAAW,GAAI,GAAM,IAEzB,EAAS,eAAe,GACjB,GAGX,EAAI,SAAS,GAEN,GAAI,IAAc,UAAY,CACjC,EAAY,GAAI,GAAK,CACjB,KAAM,QACN,OAAQ,EACR,iBAAkB,KAGtB,EAAI,eAAe,IAGZ,GAAkB,UAAU,CACnC,GAAI,GAAW,EAAc,cAC7B,GAAG,QAAQ,gEAAc,CAErB,OADI,GAAc,GACV,EAAE,EAAE,EAAE,EAAS,OAAO,IAC9B,CACI,GAAI,GAAU,EAAS,GAEvB,EAAY,KAAK,EAAQ,cAAc,kBAE3C,GAAI,GAAY,CACZ,YAAa,EAAY,OACzB,OAAQ,GAER,EAAU,KAAK,UAAU,GAE7B,GAAS,OAGT,GAAgB,GAAI,GAAa,CAC7B,MAAO,KAEX,EAAa,UAAU,GAE3B,EAAI,kBAAkB,IAG1B,YAAkB,EAAK,CACnB,QAAQ,IAAI,GACZ,EAAE,KAAK,CACH,IAAK,yBACL,KAAM,OACN,YAAa,iCACb,KAAM,EACN,QAAS,UAAU,CAAC,MAAM,uBAC1B,MAAO,UAAU,CAAC,MAAM,+BC5FhC,WAAuB,EAAO,CAC1B,MAAI,IAAS,EACF,2BAEA,EAIf,GAAI,IAAe,CACf,KAAM,2BACN,IAAK,2BACL,IAAK,2BACL,QAAS,2BACT,eAAgB,2BAChB,kBAAmB,2BACnB,gBAAiB,2BACjB,aAAc,4BAIX,GAAI,IAAa,SAAU,EAAM,CACpC,GAAI,GAAM,GAAI,gBACd,EAAI,KAAK,MAAO,6BAA+B,GAC/C,GAAI,GAAO,KACX,EAAI,mBAAqB,UAAY,CACjC,AAAI,EAAI,YAAc,GAAK,EAAI,QAAU,KACrC,GAAO,KAAK,MAAM,EAAI,cAElB,GAAQ,MACR,GAAO,IAEX,EAAE,4BAA4B,KAAK,EAAK,MACxC,EAAE,2BAA2B,KAAK,EAAc,EAAK,MACrD,EAAE,2BAA2B,KAAK,EAAc,EAAK,MACrD,EAAE,+BAA+B,KAAK,EAAc,EAAK,UAEzD,EAAE,sCAAsC,KAAK,EAAc,EAAK,iBAChE,EAAE,yCAAyC,KAAK,EAAc,EAAK,oBACnE,EAAE,uCAAuC,KAAK,EAAc,EAAK,kBACjE,EAAE,oCAAoC,KAAK,EAAc,EAAK,iBAGtE,EAAI,OAEJ,GAAI,GAAc,GAAI,gBACtB,EAAY,KAAK,MAAO,gCAAkC,GAC1D,GAAI,GAAO,KACX,EAAY,mBAAqB,UAAY,CACzC,GAAI,EAAY,YAAc,GAAK,EAAY,QAAU,IAErD,GADA,EAAO,KAAK,MAAM,EAAY,cAC1B,GAAQ,KAAM,CACd,QAAQ,IAAI,iBACZ,WAGA,GAAE,oCAAoC,KAAK,EAAK,MAChD,EAAE,gCAAgC,KAAK,EAAK,SAAY,QAAQ,KAI5E,EAAY,QCnDhB,GAAI,GAGJ,EAAI,GAAG,cAAe,SAAU,EAAK,CACjC,GAAI,GAAQ,EAAI,cAAc,EAAI,eAClC,GAAI,GAAU,GACd,EAAI,sBAAsB,EAAM,CAAC,EAAQ,IAAQ,CAC7C,AAAG,GAAO,EAAM,IAAI,SAAS,QACzB,GAAU,MAElB,AAAI,EAAI,kBAAkB,IAAU,EAChC,EAAE,QAAQ,IAAI,SAAU,WAGxB,EAAE,QAAQ,IAAI,SAAU,aAIzB,GAAI,IAAe,IAAM,CAE5B,GAAI,GAAO,EAAS,QAEpB,EAAiB,GAAI,GAAO,CACxB,UAAW,EACX,OAAQ,CAAC,GACT,MAAO,SAAU,EAAS,CACtB,GAAI,GAAQ,GAAI,GAAM,CAClB,MAAO,GAAI,GAAO,CACd,OAAQ,EACR,KAAM,GAAI,GAAK,CACX,MAAO,cAGf,KAAM,GAAI,GAAK,CACX,KAAM,8BACN,KAAM,EAAQ,IAAI,QAClB,KAAM,GAAI,GAAK,CACX,MAAO,YAEX,QAAS,GACT,QAAS,OAGjB,MAAO,MAKf,EAAe,GAAG,SAAU,SAAU,EAAK,CAEvC,GAAI,GAAW,EAAe,cAAc,WAE5C,GAAI,EAAS,OAAS,EAAG,CACrB,GAAI,GAAU,EAAS,GACvB,GAAW,EAAQ,IAAI,YAI/B,EAAI,eAAe,IChEvB,GAAI,IAAiB,GAAI,GAAM,CAC3B,MAAO,GAAI,GAAO,CACd,OAAQ,EACR,OAAQ,GAAI,GAAO,CAEf,MAAO,UACP,MAAM,IAEV,KAAM,GAAI,GAAK,CACX,MAAO,gBAKnB,KAAM,GAAO,GAAI,GAAK,CAClB,MAAO,0BAGL,EAAS,GAAI,GAAO,CACtB,MAAO,UACP,MAAO,IAGX,GAAI,IAAY,GAAI,GAAM,CACtB,MAAO,GAAI,GAAO,CACd,KAAM,EACN,OAAQ,EACR,OAAQ,IAEZ,KAAM,EACN,OAAQ,IAGL,GAAI,GAAY,CACnB,eAAkB,GAClB,UAAY,IC7BhB,GAAa,OACb,EAAe,QACf,KAAM,IAAgB,EAAe,YAC/B,GAAiB,EAAe,aAEtC,GAAe,SAAS,EAAU,gBAClC,GAAc,SAAS,EAAU,WAUjC,KAEA,KACA,KACA,KAEA,KAEA,GAAI,GACA,EAEJ,EAAE,YAAY,GAAG,aAAc,SAAU,EAAG,CACxC,EAAE,MAAM,OACR,EAAE,QAAQ,OAAO,OAAO,QAAQ,CAC5B,KAAM,MAKd,EAAE,QAAQ,GAAG,aAAc,SAAU,EAAG,CACpC,EAAE,MAAM,OAAO,QAAQ,CACnB,KAAM,IAAO,EAAE,MAAM,SACtB,UAAY,CACX,EAAE,QAAQ,OACV,EAAE,YAAY,WAKtB,EAAE,sBAAsB,GAAG,QAAS,UAAY,CAC5C,GAAI,GAAO,EAAE,MAAM,SAAS,SAAS,MAEjC,EAAQ,EAAS,aACjB,EAAU,EAAW,EAAO,GAE5B,EAAU,EAAE,mBAAmB,OAEnC,AAAI,GAAW,KACX,GAAE,mBAAmB,KAAK,EAAU,2BAAS,EAAO,8BAC9C,EAAQ,cAAc,iBAAmB,gBAG3C,GAAe,MACf,EAAY,SAAS,GAEzB,EAAc,EACd,EAAe,EAAQ,WACvB,GAAe,GACf,GAAa,IAGb,EAAE,mBAAmB,KAAK,EAAU,2BAAS,EAAO,oEAI5D,EAAE,mBAAmB,GAAG,QAAS,UAAY,CACzC,GAAI,GAAM,GAAI,gBACd,EAAI,KAAK,MAAO,kCAChB,GAAI,GAAO,KACX,EAAI,mBAAqB,UAAY,CACjC,GAAI,EAAI,YAAc,GAAK,EAAI,QAAU,IAAK,CAE1C,EAAO,KAAK,MAAM,EAAI,UACtB,GAAI,GAAO,EAAS,YACpB,GAAI,GAAQ,KAAM,CACd,QAAQ,IAAI,kBACZ,WAEC,CACD,QAAQ,IAAI,GACZ,GAAI,GAAO,GACX,OAAS,GAAI,EAAG,EAAI,EAAG,IAAK,CACxB,GAAI,GAAM,EAAW,EAAM,EAAK,GAAG,MACnC,QAAQ,IAAI,GACZ,GAAO,GAAiB,GACxB,GAAS,EAAK,GAAG,KAAU,IAAM,EAAK,GAAG,OACzC,GAAQ,IAEZ,EAAO,EAAK,MAAM,EAAG,EAAK,OAAS,GAEnC,GAAI,GAAU,EAAE,mBAAmB,OACnC,EAAE,mBAAmB,KAAK,EAAU,iEAAiB,EAAO,mBAIxE,EAAI,SAIR,EAAE,wBAAwB,GAAG,QAAS,UAAY,CAC9C,OAGJ,EAAE,uBAAuB,GAAG,QAAS,UAAY,CAC7C,OAKJ,EAAE,gBAAgB,GAAG,QAAQ,IAAI,CAC7B,EAAE,aAAa,OACf,EAAE,iBAAiB,OACnB,EAAE,eAAe,OACjB,EAAE,iBAAiB,OACnB,EAAE,oBAAoB,SAG1B,EAAE,cAAc,GAAG,QAAQ,IAAI,CAC3B,EAAE,aAAa,OACf,EAAE,iBAAiB,OACnB,EAAE,eAAe,OACjB,EAAE,iBAAiB,OACnB,EAAE,oBAAoB,SAG1B,EAAE,kBAAkB,GAAG,QAAQ,IAAI,CAC/B,EAAE,aAAa,OACf,EAAE,iBAAiB,OACnB,EAAE,eAAe,OACjB,EAAE,iBAAiB,OACnB,EAAE,oBAAoB,SAG1B,EAAE,kBAAkB,GAAG,QAAQ,IAAI,CAC/B,EAAE,aAAa,OACf,EAAE,iBAAiB,OACnB,EAAE,eAAe,OACjB,EAAE,iBAAiB,OACnB,EAAE,oBAAoB,SAI1B,EAAE,qBAAqB,GAAG,QAAQ,IAAI,CAClC,EAAE,aAAa,OACf,EAAE,iBAAiB,OACnB,EAAE,eAAe,OACjB,EAAE,iBAAiB,OACnB,EAAE,oBAAoB,SAI1B,EAAE,0BAA0B,GAAG,QAAQ,UAAU,CAC7C,EAAE,cAAc"}