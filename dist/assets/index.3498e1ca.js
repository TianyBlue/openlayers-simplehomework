import{T as m,X as d,V as k,s as y,M as x,a as C,c as P,F as V,O as E,b as p,G as g,d as h,e as M,S as G,C as N,f as O,$ as i}from"./vendor.bdcd305b.js";const T=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}};T();new m({title:"\u5929\u5730\u56FE\u77E2\u91CF",source:new d({url:"http://t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f",wrapX:!1})});var X=new k({center:[115,35],zoom:6,projection:"EPSG:4326"});new y({units:"metric",bar:!0,text:!0,className:"ol-scale-line"});var l=new x({target:"map",layers:[],view:X}),z=new y({units:"metric",target:"scalebar",className:"ol-scale-line"}),j=new C({className:"mosuePosition",coordinateFormat:P(6),projection:"EPSG:4326",target:document.getElementById("position")}),A=new V,q=function(){l.addControl(z)},D=function(){l.addControl(A)},_=function(){l.addControl(j)},u=[],w=[],b=[],$=".layers";function B(e,a){e.addEventListener("click",function(){this.checked?a.setVisible(!0):a.setVisible(!1)})}var I=function(){for(var e=l.getLayers(),a=document.querySelector($),t=0;t<e.getArray().length;t++){u[t]=e.item(t),w[t]=u[t].get("name"),b[t]=u[t].getVisible();var o=document.createElement("li");o.innerHTML='<input type="checkbox" name="layers"><label>'+w[t]+"</label>",a.appendChild(o),b[t]&&(o.firstElementChild.checked=!0),B(o.firstElementChild,u[t])}},R=new d({url:"http://t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f",wrapX:!1}),Y=new d({url:"http://t0.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=3bc6874f2b919aa581635abab7759a3f",attributions:"\u5929\u5730\u56FE\u5C5E\u6027\u63CF\u8FF0",wrapX:!1}),H=new E,J=new p({url:"http://localhost:31142/geoserver/dbtest/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=dbtest%3Achncityxy&maxFeatures=1500&outputFormat=application%2Fjson",format:new g,projection:"EPSG:4326"}),K=new p({url:"http://localhost:31142/project/GetChinaProvinces",format:new g,projection:"EPSG:4326"}),v={tiandiVec:R,tiandiMark:Y,OSM:H,city:J,province:K},W=function(e){for(var a in v)if(a==e){var t=new m({title:e,name:e,source:v[e]});l.addLayer(t);break}},S=function(e){for(var a in v)if(a==e){var t=new h({title:e,name:e,source:v[e]});l.addLayer(t);break}},L=function(e,a){for(var t=e.getSource().getFeatures(),o=String(a).split(),r=".*",n=0;n<o.length;n++)r=r+(o[n]+".*");console.log(r);for(var s=new RegExp(r),c=0;c<t.length;c++){var f=String(t[c].get("name")).trim();if(console.log(f.match(s)),f.match(r))return t[c]}return null},F=function(e){for(var a=l.getLayers(),t=0;t<a.getArray().length;t++){var o=a.item(t);if(o.get("name")==e)return o}return null},Z=new M;Z.on("click",function(){console.log(this)});var Q=new h;Q.on({});var U=l.getView(),ee=function(e){U.animate({center:e.getGeometry().getCoordinates(),duration:2e3,zoom:10})},te=new G({image:new N({radius:10,fill:new O({color:"#dc143c"})})}),re=function(e){e.setStyle(te)};W("OSM");S("city");S("province");q();D();_();I();i(".pic-nav").on("mouseenter",function(e){i(this).hide(),i(".nav").show().stop().animate({left:0})});i(".nav").on("mouseleave",function(e){i(this).stop().animate({left:-.8*i(this).width()},function(){i(".nav").hide(),i(".pic-nav").show()})});i(".searchBar button").on("click",function(){var e=i(this).siblings("input").val();console.log(e);var a=F("city"),t=L(a,e);t!=null?i(".searchState").text("\u5DF2\u641C\u7D22\u5230"+e+", \u4F4D\u7F6E\u5728:"+t.getGeometry().getCoordinates()):i(".searchState").text("\u672A\u641C\u7D22\u5230"+e+", \u8BF7\u5C1D\u8BD5\u5176\u4ED6\u4F4D\u7F6E\u3002"),re(t),ee(t)});var ae=F("province"),ne=L(ae,"\u5C71\u4E1C");console.log(ne);
//# sourceMappingURL=index.3498e1ca.js.map
